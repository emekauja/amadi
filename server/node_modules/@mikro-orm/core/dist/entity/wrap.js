"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.wrap = void 0;
const ArrayCollection_1 = require("./ArrayCollection");
const Reference_1 = require("./Reference");
const utils_1 = require("../utils");
const BaseEntity_1 = require("./BaseEntity");
/**
 * wraps entity type with WrappedEntity internal properties and helpers like init/isInitialized/populated/toJSON
 * use `preferHelper = true` to have access to the internal `__` properties like `__meta` or `__em`
 */
function wrap(entity, preferHelper = false) {
    if (entity instanceof BaseEntity_1.BaseEntity && !preferHelper) {
        return entity;
    }
    if (entity instanceof ArrayCollection_1.ArrayCollection) {
        return entity;
    }
    if (entity instanceof Reference_1.Reference) {
        entity = utils_1.Utils.unwrapReference(entity);
    }
    return entity.__helper;
}
exports.wrap = wrap;
//# sourceMappingURL=wrap.js.map